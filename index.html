<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Expenses & Income Tracker</title>
<style>
:root {
  --primary: #3b82f6;
  --primary-dark: #2563eb;
  --primary-light: #dbeafe;
  --secondary: #10b981;
  --secondary-dark: #059669;
  --danger: #ef4444;
  --danger-dark: #dc2626;
  --success: #10b981;
  --gray-50: #f9fafb;
  --gray-100: #f3f4f6;
  --gray-200: #e5e7eb;
  --gray-300: #d1d5db;
  --gray-400: #9ca3af;
  --gray-500: #6b7280;
  --gray-600: #4b5563;
  --gray-700: #374151;
  --gray-800: #1f2937;
  --gray-900: #111827;
  --white: #ffffff;
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
}

* {
  box-sizing: border-box;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  background: linear-gradient(135deg, var(--gray-50) 0%, var(--primary-light) 100%);
  margin: 0;
  padding: 20px;
  color: var(--gray-800);
  line-height: 1.6;
  min-height: 100vh;
}

h1 {
  margin: 0 0 24px;
  font-size: 2.5rem;
  font-weight: 700;
  color: var(--gray-900);
  text-align: center;
  text-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

h2 {
  margin: 0 0 16px;
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--gray-800);
  display: flex;
  align-items: center;
  gap: 8px;
}

h2::before {
  content: '';
  width: 4px;
  height: 24px;
  background: var(--primary);
  border-radius: 2px;
}

h3 {
  margin: 16px 0 12px;
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--gray-700);
}

.container {
  max-width: 1200px;
  margin: 0 auto;
}

.card {
  background: var(--white);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: var(--shadow-lg);
  border: 1px solid var(--gray-200);
  backdrop-filter: blur(10px);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-xl);
}

.row {
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
  margin-bottom: 16px;
}

.col {
  flex: 1;
  min-width: 240px;
}

label {
  display: block;
  font-size: 14px;
  font-weight: 500;
  margin-bottom: 6px;
  color: var(--gray-700);
}

input, select, button {
  width: 100%;
  padding: 12px 16px;
  border-radius: 12px;
  border: 2px solid var(--gray-200);
  font-size: 14px;
  font-family: inherit;
  transition: all 0.2s ease;
  background: var(--white);
}

input:focus, select:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

input:hover, select:hover {
  border-color: var(--gray-300);
}

button {
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  color: var(--white);
  border: none;
  cursor: pointer;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  position: relative;
  overflow: hidden;
}

button:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-lg);
}

button:active {
  transform: translateY(0);
}

.muted {
  color: var(--gray-500);
  font-size: 13px;
  font-style: italic;
}

.flex-right {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  align-items: center;
  flex-wrap: wrap;
}

table {
  width: 100%;
  border-collapse: collapse;
  text-align: center;
  white-space: nowrap;
  font-size: 14px;
}

th, td {
  padding: 12px 16px;
  border: 1px solid var(--gray-200);
  vertical-align: middle;
}

th {
  background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
  color: var(--white);
  position: sticky;
  top: 0;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-size: 12px;
}

tbody tr:nth-child(even) {
  background: var(--gray-50);
}

tbody tr:hover {
  background: var(--primary-light);
  transform: scale(1.01);
  transition: all 0.2s ease;
}

.table-wrap {
  max-height: 350px;
  overflow: auto;
  border-radius: 12px;
  border: 2px solid var(--gray-200);
  background: var(--white);
  box-shadow: var(--shadow);
}

.small-btn {
  padding: 8px 16px;
  font-size: 12px;
  border-radius: 8px;
  min-width: auto;
  width: auto;
  font-weight: 500;
}

.btn-danger {
  background: linear-gradient(135deg, var(--danger) 0%, var(--danger-dark) 100%);
}

.btn-ok {
  background: linear-gradient(135deg, var(--success) 0%, var(--secondary-dark) 100%);
}

.center {
  text-align: center;
}

.error {
  color: var(--danger);
  margin-top: 8px;
  font-weight: 500;
  padding: 8px 12px;
  background: rgba(239, 68, 68, 0.1);
  border: 1px solid rgba(239, 68, 68, 0.2);
  border-radius: 8px;
}

#latestExpense, #latestIncome {
  padding: 16px;
  border-radius: 12px;
  background: linear-gradient(135deg, var(--gray-50) 0%, var(--white) 100%);
  border: 2px solid var(--gray-200);
  font-weight: 500;
  color: var(--gray-700);
}

.total-amount {
  text-align: right;
  margin-top: 16px;
  font-weight: 700;
  font-size: 18px;
  color: var(--primary);
  padding: 12px 16px;
  background: var(--primary-light);
  border-radius: 12px;
  border: 2px solid var(--primary);
}

#addCard {
  background: linear-gradient(135deg, var(--white) 0%, var(--gray-50) 100%);
  border: 2px solid var(--primary-light);
}

.login-section {
  background: linear-gradient(135deg, var(--gray-50) 0%, var(--primary-light) 100%);
  padding: 20px;
  border-radius: 12px;
  border: 2px solid var(--gray-200);
}

@media (max-width: 768px) {
  body { padding: 16px; }
  h1 { font-size: 2rem; margin-bottom: 20px; }
  .card { padding: 20px; margin-bottom: 20px; }
  .row { flex-direction: column; gap: 12px; }
  .col { min-width: auto; }
  th, td { font-size: 12px; padding: 8px 10px; }
  input, select, button { font-size: 14px; padding: 10px 14px; }
  .flex-right { justify-content: center; flex-direction: column; }
  .small-btn { width: 100%; }
}

@media (max-width: 480px) {
  h1 { font-size: 1.75rem; }
  .card { padding: 16px; }
  th, td { font-size: 11px; padding: 6px 8px; }
}

@keyframes submitSuccess {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

.submit-success {
  animation: submitSuccess 0.3s ease;
}
</style>
</head>
<body>
<div class="container">
<h1>ğŸ’° Expenses & Income Tracker</h1>

<div class="card" id="addCard">
<h2>â• Add Expense / Income</h2>
<form id="addForm">
<div class="row">
<div class="col">
<label>Type</label>
<select id="entryType" required>
<option value="" selected>-- Select Type --</option>
<option value="expense">ğŸ’¸ Expense</option>
<option value="income">ğŸ’µ Income</option>
</select>
</div>
<div class="col">
<label>Date</label>
<input type="date" id="entryDate" required>
</div>
<div class="col">
<label>Amount (â‚±)</label>
<input type="number" id="entryAmount" step="0.01" min="0" required placeholder="0.00">
</div>
</div>
<label>Description</label>
<input type="text" id="entryDesc" placeholder="e.g. Groceries, Salary, Transportation" required>
<div style="margin-top:16px;display:flex;gap:12px">
<button type="submit">ğŸ’¾ Add Entry</button>
</div>
<div class="muted" style="margin-top:12px">ğŸ“± Data automatically saves in your browser (localStorage).</div>
</form>
</div>

<div class="card">
<h2>ğŸ”´ Latest Expense</h2>
<div id="latestExpense" class="muted">No expense added yet.</div>
</div>

<div class="card">
<h2>ğŸŸ¢ Latest Income</h2>
<div id="latestIncome" class="muted">No income added yet.</div>
</div>

<div class="card">
<h2>ğŸ“Š Expenses Summary</h2>
<div id="expensesLogin" class="login-section">
<div class="row">
<div class="col">
<label>ğŸ‘¤ Username</label>
<input id="expUsername" type="text" placeholder="admin">
</div>
<div class="col">
<label>ğŸ”’ Password</label>
<input id="expPassword" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
</div>
<div style="flex-basis:180px">
<label>&nbsp;</label>
<button onclick="loginSection('expenses')">ğŸš€ Login</button>
</div>
</div>
<div id="expLoginMsg" class="error"></div>
</div>
<div id="expensesContent" style="display:none">
<div class="flex-right" style="margin-bottom:16px">
<button class="small-btn btn-ok" onclick="changePassword('expenses')">ğŸ”‘ Change Password</button>
<button class="small-btn btn-danger" onclick="logoutSection('expenses')">ğŸšª Logout</button>
</div>
<div style="display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px">
<div style="flex:1;min-width:200px">
<label>ğŸ“… Start date</label>
<input id="expStart" type="date">
</div>
<div style="flex:1;min-width:200px">
<label>ğŸ“… End date</label>
<input id="expEnd" type="date">
</div>
<div style="min-width:120px;align-self:end">
<button onclick="applyFilter('expenses')">ğŸ” Filter</button>
</div>
</div>
<div style="margin-top:16px;display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
<div class="muted">ğŸ“‹ Showing expenses (filtered)</div>
<div style="display:flex;gap:8px">
<button class="small-btn btn-ok" onclick="copyTable('expenses')">ğŸ“‹ Copy Table</button>
</div>
</div>
<div class="table-wrap" style="margin-top:12px">
<table id="expensesTable">
<thead><tr><th>ğŸ“… Date</th><th>ğŸ“ Description</th><th>ğŸ’° Amount</th></tr></thead>
<tbody></tbody>
</table>
</div>
<div class="total-amount">
Total: â‚±<span id="expensesTotal">0.00</span>
</div>
<hr style="margin:24px 0;border:none;height:2px;background:linear-gradient(90deg,var(--primary),var(--secondary))">
<h3>ğŸ“ˆ Yearly Expenses</h3>
<div style="display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px">
<div style="flex:1;min-width:160px">
<label>ğŸ—“ï¸ Filter by year</label>
<input id="expYear" type="number" placeholder="e.g. 2025">
</div>
<div style="min-width:120px;align-self:end;display:flex;gap:8px">
<button onclick="applyYear('expenses')">ğŸ” Filter</button>
<button onclick="clearYear('expenses')" class="small-btn">ğŸ”„ Clear</button>
</div>
</div>
<div class="table-wrap" style="margin-top:12px">
<table id="expensesYearly">
<thead><tr><th>ğŸ“… Month</th><th>ğŸ’° Total</th><th>ğŸ“Š Count</th><th>ğŸ“ˆ Average</th></tr></thead>
<tbody></tbody>
</table>
</div>
</div>
</div>

<div class="card">
<h2>ğŸ“ˆ Income Summary</h2>
<div id="incomeLogin" class="login-section">
<div class="row">
<div class="col">
<label>ğŸ‘¤ Username</label>
<input id="incUsername" type="text" placeholder="admin">
</div>
<div class="col">
<label>ğŸ”’ Password</label>
<input id="incPassword" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
</div>
<div style="flex-basis:180px">
<label>&nbsp;</label>
<button onclick="loginSection('income')">ğŸš€ Login</button>
</div>
</div>
<div id="incLoginMsg" class="error"></div>
</div>
<div id="incomeContent" style="display:none">
<div class="flex-right" style="margin-bottom:16px">
<button class="small-btn btn-ok" onclick="changePassword('income')">ğŸ”‘ Change Password</button>
<button class="small-btn btn-danger" onclick="logoutSection('income')">ğŸšª Logout</button>
</div>
<div style="display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px">
<div style="flex:1;min-width:200px">
<label>ğŸ“… Start date</label>
<input id="incStart" type="date">
</div>
<div style="flex:1;min-width:200px">
<label>ğŸ“… End date</label>
<input id="incEnd" type="date">
</div>
<div style="min-width:120px;align-self:end">
<button onclick="applyFilter('income')">ğŸ” Filter</button>
</div>
</div>
<div style="margin-top:16px;display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
<div class="muted">ğŸ“‹ Showing incomes (filtered)</div>
<div style="display:flex;gap:8px">
<button class="small-btn btn-ok" onclick="copyTable('income')">ğŸ“‹ Copy Table</button>
</div>
</div>
<div class="table-wrap" style="margin-top:12px">
<table id="incomeTable">
<thead><tr><th>ğŸ“… Date</th><th>ğŸ“ Description</th><th>ğŸ’° Amount</th></tr></thead>
<tbody></tbody>
</table>
</div>
<div class="total-amount">
Total: â‚±<span id="incomeTotal">0.00</span>
</div>
<hr style="margin:24px 0;border:none;height:2px;background:linear-gradient(90deg,var(--primary),var(--secondary))">
<h3>ğŸ“ˆ Yearly Income</h3>
<div style="display:flex;gap:12px;flex-wrap:wrap;margin-bottom:16px">
<div style="flex:1;min-width:160px">
<label>ğŸ—“ï¸ Filter by year</label>
<input id="incYear" type="number" placeholder="e.g. 2025">
</div>
<div style="min-width:120px;align-self:end;display:flex;gap:8px">
<button onclick="applyYear('income')">ğŸ” Filter</button>
<button onclick="clearYear('income')" class="small-btn">ğŸ”„ Clear</button>
</div>
</div>
<div class="table-wrap" style="margin-top:12px">
<table id="incomeYearly">
<thead><tr><th>ğŸ“… Month</th><th>ğŸ’° Total</th><th>ğŸ“Š Count</th><th>ğŸ“ˆ Average</th></tr></thead>
<tbody></tbody>
</table>
</div>
</div>
</div>
</div>

<script>
const EXP_KEY="tracker_expenses_v2",INC_KEY="tracker_incomes_v2",PASS_KEY_EXP="tracker_exp_pass_v2",PASS_KEY_INC="tracker_inc_pass_v2";
let expenses=JSON.parse(localStorage.getItem(EXP_KEY)||"[]"),incomes=JSON.parse(localStorage.getItem(INC_KEY)||"[]");
let credExp=JSON.parse(localStorage.getItem(PASS_KEY_EXP)||JSON.stringify({user:"admin",pass:"2121"}));
let credInc=JSON.parse(localStorage.getItem(PASS_KEY_INC)||JSON.stringify({user:"admin",pass:"2121"}));
document.getElementById("expUsername").value=credExp.user; document.getElementById("incUsername").value=credInc.user;
document.getElementById("entryDate").value = new Date().toISOString().split('T')[0];

function saveAll(){localStorage.setItem(EXP_KEY,JSON.stringify(expenses)); localStorage.setItem(INC_KEY,JSON.stringify(incomes)); localStorage.setItem(PASS_KEY_EXP,JSON.stringify(credExp)); localStorage.setItem(PASS_KEY_INC,JSON.stringify(credInc));}

function renderLatest(){
const expEl=document.getElementById("latestExpense"); 
const incEl=document.getElementById("latestIncome");
if(expenses.length){
const last=expenses[expenses.length-1]; 
expEl.innerHTML=`<strong>${last.date}</strong> â€¢ ${last.desc} â€¢ <strong style="color:var(--danger)">â‚±${Number(last.amount).toFixed(2)}</strong>`;
}else expEl.textContent="No expense added yet.";
if(incomes.length){
const last=incomes[incomes.length-1]; 
incEl.innerHTML=`<strong>${last.date}</strong> â€¢ ${last.desc} â€¢ <strong style="color:var(--success)">â‚±${Number(last.amount).toFixed(2)}</strong>`;
}else incEl.textContent="No income added yet.";
}

document.getElementById("addForm").addEventListener("submit",e=>{
e.preventDefault(); 
const type=document.getElementById("entryType").value; 
const date=document.getElementById("entryDate").value; 
const amount=parseFloat(document.getElementById("entryAmount").value); 
const desc=document.getElementById("entryDesc").value.trim(); 
if(!type) return alert("Select a type first."); 
if(!date||!desc||isNaN(amount)) return alert("Fill valid fields."); 
if(type==="expense") expenses.push({date,desc,amount}); 
else incomes.push({date,desc,amount}); 
saveAll(); 
renderLatest(); 
if(document.getElementById("expensesContent").style.display!=="none") applyFilter("expenses"); 
if(document.getElementById("incomeContent").style.display!=="none") applyFilter("income"); 
applyYear('expenses'); 
applyYear('income'); 
e.target.reset(); 
document.getElementById("entryType").value="";
document.getElementById("entryDate").value = new Date().toISOString().split('T')[0];
document.getElementById("addCard").classList.add("submit-success");
setTimeout(() => document.getElementById("addCard").classList.remove("submit-success"), 300);
});

function loginSection(section){if(section==='expenses'){const u=document.getElementById("expUsername").value.trim(); const p=document.getElementById("expPassword").value; if(u===credExp.user && p===credExp.pass){document.getElementById("expensesLogin").style.display="none"; document.getElementById("expensesContent").style.display="block"; document.getElementById("expLoginMsg").textContent=""; applyFilter('expenses'); applyYear('expenses');} else document.getElementById("expLoginMsg").textContent="âŒ Wrong credentials";}else{const u=document.getElementById("incUsername").value.trim(); const p=document.getElementById("incPassword").value; if(u===credInc.user && p===credInc.pass){document.getElementById("incomeLogin").style.display="none"; document.getElementById("incomeContent").style.display="block"; document.getElementById("incLoginMsg").textContent=""; applyFilter('income'); applyYear('income');} else document.getElementById("incLoginMsg").textContent="âŒ Wrong credentials";}}

function logoutSection(section){if(section==='expenses'){document.getElementById("expensesContent").style.display="none"; document.getElementById("expensesLogin").style.display="block"; document.getElementById("expPassword").value="";} else {document.getElementById("incomeContent").style.display="none"; document.getElementById("incomeLogin").style.display="block"; document.getElementById("incPassword").value="";}}

function changePassword(section){const newPass=prompt("ğŸ”‘ Enter new password (min 3 chars):"); if(!newPass||newPass.length<3) return alert("Password not changed."); if(section==='expenses'){credExp.pass=newPass; saveAll(); alert("âœ… Expenses password updated.");} else {credInc.pass=newPass; saveAll(); alert("âœ… Income password updated.");}}

function applyFilter(section){if(section==='expenses'){const start=document.getElementById("expStart").value; const end=document.getElementById("expEnd").value; renderSummaryTable('expenses',start||null,end||null);}else{const start=document.getElementById("incStart").value; const end=document.getElementById("incEnd").value; renderSummaryTable('income',start||null,end||null);}}

function renderSummaryTable(section,start=null,end=null){const tableBody=document.querySelector(`#${section}Table tbody`); tableBody.innerHTML=""; const list=section==='expenses'?expenses:incomes; let total=0; const filtered=list.filter(item=>{if(start && item.date<start) return false; if(end && item.date>end) return false; return true;}); filtered.forEach(it=>{const tr=document.createElement('tr'); tr.innerHTML=`<td><strong>${it.date}</strong></td><td>${escapeHtml(it.desc)}</td><td><strong>â‚±${Number(it.amount).toFixed(2)}</strong></td>`; tableBody.appendChild(tr); total+=Number(it.amount);}); if(section==='expenses') document.getElementById("expensesTotal").textContent=Number(total).toFixed(2); else document.getElementById("incomeTotal").textContent=Number(total).toFixed(2);}

function applyYear(section){const yearInput=section==='expenses'?document.getElementById("expYear").value:document.getElementById("incYear").value; const yearFilter=yearInput?String(yearInput):null; renderYearly(section,yearFilter);}

function clearYear(section){if(section==='expenses'){document.getElementById("expYear").value=""; renderYearly('expenses', null);}else{document.getElementById("incYear").value=""; renderYearly('income', null);}}

function renderYearly(section,yearFilter=null){const tbody=document.querySelector(`#${section}Yearly tbody`); tbody.innerHTML=""; const list=section==='expenses'?expenses:incomes; const months=["January","February","March","April","May","June","July","August","September","October","November","December"]; let grandTotal=0, grandCount=0; months.forEach((m,idx)=>{ const mm=String(idx+1).padStart(2,'0'); const filtered=list.filter(it=>{const [y,mo]=it.date.split("-"); if(yearFilter && y!==String(yearFilter)) return false; return mo===mm;}); const total=filtered.reduce((s,it)=>s+Number(it.amount),0); const count=filtered.length; grandTotal+=total; grandCount+=count; const tr=document.createElement('tr'); tr.innerHTML=`<td><strong>${m}</strong></td><td><strong>â‚±${Number(total).toFixed(2)}</strong></td><td>${count}</td><td>â‚±${Number(count?total/count:0).toFixed(2)}</td>`; tbody.appendChild(tr);}); const trTotal=document.createElement('tr'); trTotal.style.fontWeight='700'; trTotal.style.background='linear-gradient(135deg, var(--primary-light) 0%, var(--secondary) 20%)'; trTotal.style.color='var(--white)'; trTotal.innerHTML=`<td><strong>ğŸ¯ TOTAL</strong></td><td><strong>â‚±${Number(grandTotal).toFixed(2)}</strong></td><td><strong>${grandCount}</strong></td><td><strong>â‚±${Number(grandCount?grandTotal/grandCount:0).toFixed(2)}</strong></td>`; tbody.appendChild(trTotal);}

function copyTable(section){const wrapId=section==='expenses'?"expensesTable":"incomeTable"; const table=document.getElementById(wrapId); const rows=table.querySelectorAll("tr"); const lines=[]; rows.forEach(r=>{const cols=r.querySelectorAll("th,td"); const vals=[]; cols.forEach(c=>{let txt=c.innerText.replace(/â‚±/g,'').replace(/ğŸ¯|ğŸ“…|ğŸ“|ğŸ’°|ğŸ“Š|ğŸ“ˆ/g,'').trim(); txt=txt.replace(/"/g,'""'); vals.push(`"${txt}"`);}); if(vals.length) lines.push(vals.join("\t"));}); navigator.clipboard.writeText(lines.join("\n")).then(()=> alert("âœ… Table copied! Paste into Excel/Sheets.")).catch(()=> alert("âŒ Copy failed. Try manually selecting the table."));}

function escapeHtml(s){return String(s).replace(/[&<>"]/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c]));}

renderLatest(); 
renderSummaryTable('expenses'); 
renderSummaryTable('income'); 
renderYearly('expenses'); 
renderYearly('income');

window.loginSection=loginSection; 
window.logoutSection=logoutSection; 
window.changePassword=changePassword; 
window.applyFilter=applyFilter; 
window.applyYear=applyYear; 
window.clearYear=clearYear; 
window.copyTable=copyTable;
</script>
</body>
</html>